/* grapper-core - 1.1.0-rc.1 [module:core] */ var me="function",q="undefined",x="object",b="string",D="array",E="number",T="boolean",ye="date";var _=(e,t)=>typeof e===t,Ee=(e,t)=>e instanceof t,p=e=>_(e,x),N=e=>_(e,b),u=e=>_(e,me);var X=e=>!Number.isNaN(e),a=e=>_(e,q);var xe=e=>Array.isArray(e),B=e=>Ee(e,Date)&&!isNaN(e),d=e=>e===null,K=e=>e.replace(/-([a-z0-9])/g,(t,n)=>n.toUpperCase());function Ne(e){if(N(e))try{return JSON.parse(`{${e.replace(/^\s*{/,"").replace(/}\s*$/,"").split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(t=>!["",";",","].includes(t.trim())).map(t=>t.split(":")).map(t=>`"${t[0].trim()}":${R(t[1].trim(),void 0,!0)}`).join(",")}}`)}catch{try{return R(e)}catch(n){console.error(n);return}}if(p(e))return e}function Q(e){if(N(e))return e.trim().startsWith("[")?(e.match(/\[(.*?)[^\]]]/g)||[]).map(t=>Q(t.substring(1,t.length-1))):e.split(/[,;]/).map(t=>R(t.trim()));if(xe(e))return e}function R(e,t,n=!1){if(!N(e))return e;if(e=ge(e.trim()),t===D)return Q(e);if(t===x)return Ne(e);if(a(t)||t===E){if(a(e)||e==="")return;let r=+e;if(X(r)||t===E)return r}if(a(t)||t===T){if(e==="true")return!0;if(e==="false")return!1;if(t===T)return e==="0"?!1:!!e}if(t===ye){try{let r=new Date(e);if(X(r.getTime()))return r}catch{}return}if(a(t)||t===b)return n?`"${e}"`:e}function ge(e){return e[0]==="'"&&e[e.length-1]==="'"||e[0]==='"'&&e[e.length-1]==='"'?e.substring(1,e.length-1):e}var Z=new WeakSet,C=!1,v=(e,t)=>!p(e)||d(e)||!u(t)?e:function n(r){if(Z.has(r))return r;for(let i in r)p(r[i])&&!d(r[i])&&(r[i]=n(r[i]));let s=new Proxy(r,{get(i,o){let c=Reflect.get(r,o);return u(c)&&B(i)&&N(o)&&o.substring(0,3)==="set"&&u(t)&&(c=function(...f){let y=Reflect.get(i,o).apply(i,f);return!C&&t(e),y}),B(i)?c.bind(i):c},set(i,o,c){let f,y=i[o]===c;return p(c)&&!d(c)?f=Reflect.set(i,o,n(c)):f=Reflect.set(i,o,c),!C&&!y&&t(e),f},deleteProperty(i,o){let c=Reflect.deleteProperty(i,o);return!C&&t(e),c}});return Z.add(s),s}(e);v.stop=()=>C=!0;v.start=()=>C=!1;var U=v;var w=!1,M=!0;function Oe(e){return e===null?null:e.constructor?new e.constructor:{}}function I(e){if(!p(e))return e;let t=e===null?null:Object.assign(Oe(e),e);for(let n in t)p(t[n])&&(t[n]=I(t[n]));return t}function j(e,t){let n=[],r=[];function s(o,c){if(d(o)||d(c))return w;if(u(o.valueOf)&&u(c.valueOf)&&(o!==o.valueOf()||c!==c.valueOf()))return o.valueOf()===c.valueOf()&&o.constructor===c.constructor;if(n.indexOf(o)>-1&&r.indexOf(c)>-1)return M;let f=Object.keys(o),y=Object.keys(c);if(f.length!==y.length)return w;if(f.length>0){n.push(o),r.push(c);let P=f.length;for(;P--;){let J=f[P];if(!i(o[J],c[J]))return w}}return M}function i(o,c){if(o===c)return M;let f=typeof o;return f!==typeof c?w:f===E&&isNaN(o)&&isNaN(c)?M:f===x?s(o,c):w}return i(e,t)}var l=Symbol(),A=Symbol(),h=Symbol(),z=Object.defineProperty;function Se(e,t,n,r=!1){if(!(e.ready===!1||!t))if(r)n?e.setAttribute(t,""):e.removeAttribute(t);else{let s=d(n)||a(n)?"":n.toString();e.hasAttribute(t)&&e.getAttribute(t)!==s&&e.setAttribute(t,s)}}function Te(e){this[l]={};let t=e;do{let n=L.get(t);for(let r in n)if(n.hasOwnProperty(r)&&this.hasOwnProperty(r)){let s=this[r];delete this[r],this[r]=a(s)?I(n[r]):s}else r in this[l]||(this[l][r]=I(n[r]));t=Object.getPrototypeOf(t)}while(t!==HTMLElement)}function Re(){new MutationObserver(e=>{e.some(t=>!t.attributeName)&&this[h]("update"),(a(this.ready)||this.ready)&&u(this[A])&&this[A](e)}).observe(this,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}var L=new WeakMap,g=class extends HTMLElement{constructor(){super(),Te.call(this,new.target),u(this[A])&&Re.call(this)}[h](t,n={},r=!1){return this.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n,composed:r}))}};function Ae(e,t){t.propertyName||(t.propertyName=K(t.name)),ne(e,{...t,name:t.propertyName,attribute:t.name});let n=Object.getPrototypeOf(e),r="observedAttributes",s=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(n,r),o=s?s.get:void 0;z(e,r,Ce(e,t,n,o,s,i));let c="attributeChangedCallback",f=Object.getOwnPropertyDescriptor(e.prototype,c),y=Object.getOwnPropertyDescriptor(n.prototype,c),P=f?f.value:void 0;z(e.prototype,c,be(t,P,y))}function be(e,t,n){return{value:function(r,s,i){if(e.name===r){let o=e.propertyName;this[o]!==i&&(e.type===T?this[o]=this.hasAttribute(e.name):this[o]=R(i,e.type))}else t&&t.apply(this,arguments);n?.value&&n.value.apply(this,arguments)},enumerable:!1,writable:!0,configurable:!0}}function Ce(e,t,n,r,s,i){let o={enumerable:!1,configurable:!0};return s?i?o.get=function(){return[t.name,...r.call(e),...i.get.call(n)]}:o.get=function(){return[t.name,...r.call(e)]}:o.get=i?function(){return[t.name,...i.get.call(n)]}:function(){return[t.name]},o}function ne(e,t){z(e.prototype,t.name,{set:re(t),get:$e(t),configurable:!0,enumerable:!1}),L.has(e)||L.set(e,{}),L.get(e)[t.name]=t.value}function we(e,t){d(e.posUpdateEvent)||(e.posUpdateEvent?this[h](e.posUpdateEvent,{[e.name]:t}):this[h]("update",{[e.name]:t})),u(e.posUpdate)?e.posUpdate.call(this,t):u(this[e.posUpdate])&&this[e.posUpdate]()}function re(e){return function(t){let n=this[l];u(e.preUpdate)&&!e.preUpdate.call(this,t)||(e.schema&&(U.stop(),t=e.schema.normalize(t),U.start()),!(!p(t)&&j(n[e.name],t))&&(u(e.set)?e.set.call(this,t):n[e.name]=N(t)&&e.type?R(t,e.type):t,e.attribute&&![D,x].includes(e.type)&&Se(this,e.attribute,t,e.type===T),we.call(this,e,t)))}}function $e(e){return function(){if(u(e.get))return e.get.call(this);{let t=this[l];switch(e.type){case E:return a(t[e.name])?void 0:Number(t[e.name]);case T:return!!t[e.name];case x:case D:return U(t[e.name]||(e.type===x?{}:[]),n=>re(e).call(this,n));default:return t[e.name]}}}}function te(e,t){t=t.toLowerCase(),customElements.get(t)||customElements.define(t,e)}function ie(e,t={}){return t.prop=(...n)=>(n.forEach(r=>ne(e,{...r})),t),t.attr=(...n)=>(n.forEach(r=>Ae(e,{...r})),t),t.tag=n=>(te(e,n),t),t.alias=n=>(te(class extends e{},n),t),t.extension=t.ext=n=>(n.call(t,t,e),t),t}g.CHANGE=A;g.FIRE_EVENT=h;function H(e,t){let n=new WeakMap,r=[];return function(...s){return clearTimeout(n.get(this)),new Promise((i,o)=>{r.push({resolve:i,reject:o}),n.set(this,setTimeout(()=>{try{let c=e.apply(this,s);r.forEach(f=>f.resolve(c))}catch(c){r.forEach(f=>f.reject(c))}finally{r.length=0}},t))})}}function G(e,t){return function(...n){if(e.apply(this,n))return t.apply(this,n)}}function W(e,t){return function(...n){let r=e.apply(this,n);return u(r.then)?r.then(s=>t.call(this,s)||s):t.call(this,r)||r}}var oe=1,F=Symbol(),V=Symbol(),O=Symbol(),S=Symbol(),se=(e,t)=>e[t]?.forEach(n=>u(n)&&n.apply(e)),m=class extends g{constructor(t){super(),this.attachShadow({mode:"open"}),this[l].ready=t||!1,this[l].rendered=!1,a(t)&&(this.ready=!0)}get ready(){return this[l].ready}set ready(t){let n=this[l],r=n.ready;n.ready=!!t,r===!1&&n.ready===!0&&(this[h]("ready",{ready:!0}),u(this[S])&&this[S]())}get rendered(){return this[l].rendered}set rendered(t){let n=this[l],r=n.rendered;n.rendered=!!t,r===!1&&n.rendered===!0&&this[h]("render",{rendered:!0})}connectedCallback(){se(this,F)}disconnectedCallback(){se(this,V)}};m.prototype[F]=[];m.prototype[V]=[];function Pe(e){if(u(e.prototype[S])){let t=e.prototype[S];e.prototype[S]=G(function(){return this.rendered=!1,this.ready},H(W(async function(){return t.apply(this)},function(n){this.rendered=n!==!1,this.rendered&&u(this[O])&&this[O]()}),oe))}if(u(e.prototype[O])){let t=e.prototype[O];e.prototype[O]=G(function(n){return n&&(this[l].rendered=!0),this.ready&&this[l].rendered},H(W(async function(...n){return t.apply(this,n)},function(){this[h]("refresh")}),oe))}}function ce(e,t={}){return Pe(e),ie(e,t)}m.RENDER=S;m.REFRESH=O;m.ONCONNECT=F;m.ONDISCONNECT=V;var ue=Symbol(),$=Symbol(),fe=class extends m{constructor(t){super(t)}connectedCallback(){let t=this.getBoundingClientRect(),n=getComputedStyle(this).flexDirection,r=()=>{let{width:s,height:i}=this.getBoundingClientRect(),o=getComputedStyle(this).flexDirection;(s!==t.width||i!==t.height||o!==n)&&(u(this[ue])&&this[ue](s,i,s-t.width,i-t.height),t={width:s,height:i},n=o,this[h]("resize",t)),this[l]._resizeObserver=window.requestAnimationFrame(r)};r(),super.connectedCallback()}disconnectedCallback(){window.cancelAnimationFrame(this[l]._resizeObserver),super.disconnectedCallback()}};function De(e,t){let n={name:t.name.startsWith("--")?t.name:`--${t.name}`,initialValue:t.initialValue??t.value??"",syntax:t.syntax??"*",inherits:t.inherits??!0};e.prototype[$]||(e.prototype[$]={}),e.prototype[$][n.name]=n}function nt(e){let t=ce(e,{style:(...n)=>(n.forEach(r=>De(e,{...r})),t)});return t}var le=e=>e.startsWith("--")?e:`--${e}`;function st(e,t,n){n=p(n)?n.name:n;let r=getComputedStyle(e).getPropertyValue(n);return(a(r)||r==="")&&t&&t.hasOwnProperty(n)?t[n].value:r}function ae(e){return e[$]||{}}function ct(e){return Object.keys(ae(e))}function _e(e,t){let n=ae(e);return t=le(p(t)?t.name:t),n[t]}function ut(e,...t){let n="",r="";for(let s=0;s<t.length;s++){let i=_e(e,t[s]);n+=`${n?", ":""} var(${le(i?.name||t[s])}`,r=i?.initialValue}return r&&(n+=`, ${r}`),n+=")".repeat(t.length),n}var Ue="intersection.enter",Me="intersection.exit",k=Symbol();function Ie(e){let t=s=>{setTimeout(()=>(this._el||this.svg?._el||this).dispatchEvent(new CustomEvent(s,{bubbles:!0,cancelable:!0,composed:!0})),50)},n=!0,r=!1;this[k]&&this[k].disconnect(),this[k]=new IntersectionObserver(s=>{s.forEach(i=>{i.isIntersecting&&i.intersectionRatio>=e?r||(r=!0,t(Ue)):(r||n)&&(r=!1,t(Me))}),n=!1},{root:null,rootMargin:"0px",threshold:Array(21).fill(0).map((s,i)=>i*.05)}),this[k].observe(this._el||this)}var Y=Ie;var pe=Symbol();function dt(e){e.attr({name:"intersection-once-class",type:b,value:""}).attr({name:"intersection-class",type:b,value:""}).attr({name:"intersection-ratio",type:E,value:0,posUpdate:Fe})}var he=(e,t)=>t&&t.split(/\s+/).forEach(n=>e.add(n)),Le=(e,t)=>t&&t.split(/\s+/).forEach(n=>e.remove(n)),de=(e,t)=>{t.preventDefault();let n=()=>{e.removeEventListener("render",n),e[h](t.type,t.detail,t.composed)};e.addEventListener("render",n)};function Fe(){let e=this[l];if(this[pe])return Y.call(this,e.intersectionRatio);this[pe]=!0;let t=this.classList;this.addEventListener("intersection.enter",n=>{he(t,e.intersectionOnceClass),he(t,e.intersectionClass),this.rendered||de(this,n)}),this.addEventListener("intersection.exit",n=>{Le(t,e.intersectionClass),this.rendered||de(this,n)}),Y.call(this,e.intersectionRatio)}export{m as Base,A as CHANGE,l as CONTEXT,$ as CSS_PROPS,fe as Extra,h as FIRE_EVENT,F as ONCONNECT,V as ONDISCONNECT,O as REFRESH,S as RENDER,ue as RESIZE,g as Simple,nt as define,ct as getCSSProperties,_e as getCSSProperty,ae as getCSSPropertyDescriptors,st as getCSSPropertyValue,ut as getCSSVar,dt as intersectionCoreExtension};